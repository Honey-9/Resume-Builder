{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _slicedToArray from \"/home/honey/Documents/Resume builder/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/home/honey/Documents/Resume builder/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/home/honey/Documents/Resume builder/components/drag&drop/ReorderExtras.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Button from '@material-ui/core/Button';\nimport { v4 as uuidv4 } from 'uuid';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { Fragment } from 'react';\nimport AddIcon from '@material-ui/icons/Add';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { addExtrasData, addSampleExtraData, deleteSingleExtraData } from '../../redux/actions/resumeActions';\nimport { Drawer, makeStyles, useMediaQuery } from '@material-ui/core';\nimport clsx from 'clsx';\nimport ExtrasCard from '../cards/ExtrasCard';\nimport EditSingleExtra from '../forms/EditSingleExtra';\n\nvar ReorderExtras = function ReorderExtras(_ref) {\n  _s();\n\n  var closeDrawer = _ref.closeDrawer,\n      anchor = _ref.anchor;\n  // media Query\n  var matches = useMediaQuery('(min-width:1024px)');\n  var dispatch = useDispatch(); // Fetch Global State \n\n  var extras = useSelector(function (state) {\n    return state.resume.data.extras;\n  }); // Local Extras State for drag and drop\n\n  var _useState = useState(extras),\n      ext = _useState[0],\n      setExt = _useState[1];\n\n  var extrasStates = {};\n  ext.forEach(function (ext) {\n    return extrasStates[ext.id] = false;\n  }); // \n\n  var _useState2 = useState(_objectSpread({}, extrasStates)),\n      extraActive = _useState2[0],\n      setExtraActive = _useState2[1]; // This to keep track of localState if one of the extras have been updated to update state in useEffect\n\n\n  var _useState3 = useState(false),\n      edit = _useState3[0],\n      setEdit = _useState3[1];\n\n  var extDrawerStatesObj = {};\n  ext.map(function (ext) {\n    return extDrawerStatesObj[ext.id] = false;\n  });\n  useEffect(function () {\n    if (!(extras.length === ext.length)) {\n      setExt(extras);\n    }\n\n    if (edit) {\n      setExt(extras);\n      setEdit(false);\n    }\n  }, [extras, ext, edit]);\n  var useStyles = makeStyles({\n    list: {\n      width: matches ? '50vw' : '100vw',\n      // width: '50vw',\n      minHeight: matches ? '0' : '100vh'\n    },\n    fullList: {\n      width: 'auto'\n    }\n  });\n  var classes = useStyles(); // Nested Drawer States\n\n  var _React$useState = React.useState(_objectSpread({}, extDrawerStatesObj)),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      extDrawerStates = _React$useState2[0],\n      setExtDrawerStates = _React$useState2[1];\n\n  var toggleExtDrawerStates = function toggleExtDrawerStates(id, open) {\n    return function (event) {\n      setExtDrawerStates(_objectSpread(_objectSpread({}, extDrawerStates), {}, _defineProperty({}, id, open)));\n    };\n  };\n\n  var onDragEnd = function onDragEnd(result) {\n    if (!result.destination) return;\n    var items = Array.from(ext);\n\n    var _items$splice = items.splice(result.source.index, 1),\n        _items$splice2 = _slicedToArray(_items$splice, 1),\n        reorderItem = _items$splice2[0];\n\n    items.splice(result.destination.index, 0, reorderItem);\n    setExt(items);\n  };\n\n  var grid = 10;\n\n  var getItemStyle = function getItemStyle(isDragging, draggableStyle) {\n    return _objectSpread({\n      // some basic styles to make the items look a bit nicer\n      userSelect: 'none',\n      padding: grid * 2,\n      margin: \"0 0 \".concat(grid, \"px 0\"),\n      transition: 'height 0.2s',\n      overflow: 'hidden',\n      // change background colour if dragging\n      background: isDragging ? '#1abc9c95' : '#1abc9c'\n    }, draggableStyle);\n  };\n\n  var getListStyle = function getListStyle(isDraggingOver) {\n    return {// background: isDraggingOver ? '#ffffff' : '#16a085',\t\t\n    };\n  };\n\n  var disableActiveExt = function disableActiveExt() {\n    var clone = Object.create(extraActive);\n    var ids = Object.keys(clone); // create an object that will be passed as in state \n    // which we will use to disable the rest state (false)\n    // this will ensure at one time only one is active\n\n    var fakeState = {}; // assign each state false\n\n    ids.forEach(function (id) {\n      fakeState[id] = false;\n    }); // setActive only the one that gets clicked \n\n    setExtraActive(fakeState);\n  };\n\n  var onClickExt = function onClickExt(_ref2) {\n    var id = _ref2.id;\n    // CLone the activeExtra State\n    var clone = Object.create(extraActive); // check if the clicked extra is already active then disable it and return \n\n    if (clone[id]) {\n      setExtraActive(function (p) {\n        return _objectSpread(_objectSpread({}, p), {}, _defineProperty({}, id, false));\n      });\n      return;\n    } // Get All Ids from state in an Array\n\n\n    var ids = Object.keys(clone); // create an object that will be passed as in state \n    // which we will use to disable the rest state (false)\n    // this will ensure at one time only one is active\n\n    var fakeState = {}; // assign each state false\n\n    ids.forEach(function (id) {\n      fakeState[id] = false;\n    }); // setActive only the one that gets clicked \n\n    setExtraActive(function (p) {\n      return _objectSpread(_objectSpread({}, ids), {}, _defineProperty({}, id, true));\n    });\n  };\n\n  var onDelete = function onDelete(_ref3) {\n    var id = _ref3.id;\n    dispatch(deleteSingleExtraData(id));\n  };\n\n  var save = function save() {\n    dispatch(addExtrasData(ext));\n    closeDrawer(anchor, false);\n  };\n\n  var onAdd = function onAdd() {\n    dispatch(addSampleExtraData({\n      id: uuidv4(),\n      title: 'Sample Title',\n      type: 'COMMA',\n      items: ['Sample Item 1', 'Sample Item 2']\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-start flex-wrap lg:flex-nowrap\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full md:w-auto mb-4 md:mb-0\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          className: \"lg:px-4 lg:py-2 mr-4\",\n          onClick: function onClick() {\n            return closeDrawer(anchor, false);\n          },\n          color: \"default\",\n          variant: \"text\",\n          children: [' ', /*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 4\n          }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"ml-2 capitalize\",\n            children: \"Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 21\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 3\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 3\n      }, _this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"lg:px-4 lg:py-2 mr-4\",\n        onClick: onAdd,\n        color: \"primary\",\n        variant: \"outlined\",\n        children: [/*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 4\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ml-2 capitalize\",\n          children: \"Add Extra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 15\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 3\n      }, _this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"lg:px-4 lg:py-2\",\n        onClick: save,\n        color: \"primary\",\n        variant: \"contained\",\n        children: [/*#__PURE__*/_jsxDEV(SaveIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 4\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ml-2 capitalize\",\n          children: \"Save Order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 16\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 3\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 3\n    }, _this), /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragEnd: onDragEnd,\n      children: /*#__PURE__*/_jsxDEV(Droppable, {\n        droppableId: 'extras',\n        children: function children(provided, snapshot) {\n          return /*#__PURE__*/_jsxDEV(\"div\", _objectSpread(_objectSpread({\n            style: getListStyle(snapshot.isDraggingOver),\n            className: \"pb-10 pt-8 rounded\"\n          }, provided.droppableProps), {}, {\n            ref: provided.innerRef,\n            onClick: function onClick() {\n              if (snapshot.isDraggingOver) {\n                disableActiveExt();\n              }\n            },\n            children: [ext.map(function (e, index) {\n              return /*#__PURE__*/_jsxDEV(Draggable, {\n                draggableId: e.id,\n                index: index,\n                children: function children(provided, snapshot) {\n                  return /*#__PURE__*/_jsxDEV(\"div\", _objectSpread(_objectSpread(_objectSpread({\n                    onClick: function onClick() {\n                      return onClickExt({\n                        id: e.id\n                      });\n                    },\n                    className: \"p-6 text-white text-lg bg-primary rounded\"\n                  }, provided.draggableProps), provided.dragHandleProps), {}, {\n                    ref: provided.innerRef,\n                    style: _objectSpread({}, getItemStyle(snapshot.isDragging, provided.draggableProps.style)),\n                    children: /*#__PURE__*/_jsxDEV(ExtrasCard, _objectSpread(_objectSpread({}, e), {}, {\n                      onDelete: onDelete,\n                      openEditExtForm: toggleExtDrawerStates(e.id, true),\n                      extraActive: extraActive\n                    }), void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 224,\n                      columnNumber: 11\n                    }, _this)\n                  }), void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 11\n                  }, _this);\n                }\n              }, e.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 8\n              }, _this);\n            }), provided.placeholder]\n          }), void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 6\n          }, _this);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 4\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 3\n    }, _this), ext.map(function (ext) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Drawer, {\n          anchor: 'left',\n          open: extDrawerStates[ext.id],\n          onClose: toggleExtDrawerStates(ext.id, false),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: clsx(classes.list),\n            role: \"presentation\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pt-10 pl-10 pr-10\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex align-center\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"px-4 py-2\",\n                  onClick: toggleExtDrawerStates(ext.id, false),\n                  color: \"default\",\n                  variant: \"outlined\",\n                  children: [/*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 6\n                  }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"ml-2 capitalize\",\n                    children: \"Back\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 23\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 5\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 5\n              }, _this), /*#__PURE__*/_jsxDEV(EditSingleExtra, {\n                anchor: anchor,\n                extra: ext,\n                setEdit: setEdit,\n                closeDrawer: toggleExtDrawerStates(ext.id, false)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 5\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 4\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 3\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 3\n        }, _this)\n      }, ext.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 3\n      }, _this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(ReorderExtras, \"coapYxpeqGPclyhjh+2zRGA05J4=\", true, function () {\n  return [useMediaQuery, useDispatch, useSelector];\n});\n\n_c = ReorderExtras;\nexport default ReorderExtras;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReorderExtras\");","map":{"version":3,"sources":["/home/honey/Documents/Resume builder/components/drag&drop/ReorderExtras.js"],"names":["React","useState","useEffect","useRef","DragDropContext","Droppable","Draggable","useDispatch","useSelector","Button","v4","uuidv4","ArrowBackIcon","Fragment","AddIcon","SaveIcon","addExtrasData","addSampleExtraData","deleteSingleExtraData","Drawer","makeStyles","useMediaQuery","clsx","ExtrasCard","EditSingleExtra","ReorderExtras","closeDrawer","anchor","matches","dispatch","extras","state","resume","data","ext","setExt","extrasStates","forEach","id","extraActive","setExtraActive","edit","setEdit","extDrawerStatesObj","map","length","useStyles","list","width","minHeight","fullList","classes","extDrawerStates","setExtDrawerStates","toggleExtDrawerStates","open","event","onDragEnd","result","destination","items","Array","from","splice","source","index","reorderItem","grid","getItemStyle","isDragging","draggableStyle","userSelect","padding","margin","transition","overflow","background","getListStyle","isDraggingOver","disableActiveExt","clone","Object","create","ids","keys","fakeState","onClickExt","p","onDelete","save","onAdd","title","type","provided","snapshot","droppableProps","innerRef","e","draggableProps","dragHandleProps","style","placeholder"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Button from '@material-ui/core/Button';\nimport { v4 as uuidv4 } from 'uuid';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { Fragment } from 'react';\nimport AddIcon from '@material-ui/icons/Add';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { addExtrasData, addSampleExtraData, deleteSingleExtraData } from '../../redux/actions/resumeActions';\nimport { Drawer, makeStyles, useMediaQuery } from '@material-ui/core';\nimport clsx from 'clsx';\nimport ExtrasCard from '../cards/ExtrasCard';\nimport EditSingleExtra from '../forms/EditSingleExtra';\n\nconst ReorderExtras = ({closeDrawer, anchor}) => {\n\t// media Query\n\tconst matches = useMediaQuery('(min-width:1024px)');\n\tconst dispatch = useDispatch();\n\n\t// Fetch Global State \n\tconst extras = useSelector((state) => state.resume.data.extras)\n\n\t// Local Extras State for drag and drop\n\tconst [ext, setExt] = useState(extras);\n\tconst extrasStates = {};\n\text.forEach((ext) => (extrasStates[ext.id] = false));\n\t// \n\tconst [extraActive, setExtraActive] = useState({...extrasStates});\n\n\t// This to keep track of localState if one of the extras have been updated to update state in useEffect\n\tconst [edit, setEdit] = useState(false)\n\n\tconst extDrawerStatesObj = {};\n\text.map((ext) => (extDrawerStatesObj[ext.id] = false));\n\n\tuseEffect(() => {\n\t\tif(!(extras.length === ext.length)){\n\t\t\tsetExt(extras)\n\t\t}\n\t\tif(edit) {\n\t\t\tsetExt(extras)\n\t\t\tsetEdit(false)\n\t\t}\n\t},[extras, ext, edit])\n\n\tconst useStyles = makeStyles({\n\t\tlist: {\n\t\t\twidth: matches ? '50vw' : '100vw',\n\t\t\t// width: '50vw',\n\t\t\tminHeight: matches ? '0' : '100vh',\n\t\t},\n\t\tfullList: {\n\t\t\twidth: 'auto',\n\t\t},\n\t});\n\tconst classes = useStyles();\n\n\t// Nested Drawer States\n\tconst [extDrawerStates, setExtDrawerStates] = React.useState({ ...extDrawerStatesObj });\n\tconst toggleExtDrawerStates = (id, open) => (event) => {\n\t\tsetExtDrawerStates({ ...extDrawerStates, [id]: open });\n\t};\n\tconst onDragEnd = (result) => {\n\t\tif (!result.destination) return;\n\t\tconst items = Array.from(ext);\n\t\tconst [reorderItem] = items.splice(result.source.index, 1);\n\t\titems.splice(result.destination.index, 0, reorderItem);\n\t\tsetExt(items);\n\t};\n\n\tconst grid = 10;\n\tconst getItemStyle = (isDragging, draggableStyle) =>  ({\n\t\t\t// some basic styles to make the items look a bit nicer\n\t\t\tuserSelect: 'none',\n\t\t\tpadding: grid * 2,\n\t\t\tmargin: `0 0 ${grid}px 0`,\n\t\t\ttransition: 'height 0.2s',\n\t\t\toverflow: 'hidden',\n\t\n\t\t\t// change background colour if dragging\n\t\t\tbackground: isDragging ? '#1abc9c95' : '#1abc9c',\n\t\t\t\n\t\t\t// styles we need to apply on draggables\n\t\t\t...draggableStyle,\n\t\t});\n\n\tconst getListStyle = (isDraggingOver) => ({\n\t\t// background: isDraggingOver ? '#ffffff' : '#16a085',\t\t\n\t});\n\n\tconst disableActiveExt = () => {\n\t\tconst clone = Object.create(extraActive)\n\n\t\tconst ids = Object.keys(clone);\n\n\t\t// create an object that will be passed as in state \n\t\t// which we will use to disable the rest state (false)\n\t\t// this will ensure at one time only one is active\n\t\tconst fakeState = {}\n\n\t\t// assign each state false\n\t\tids.forEach((id) => {fakeState[id] = false })\n\n\t\t// setActive only the one that gets clicked \n\t\tsetExtraActive(fakeState)\t\n\t}\n\n\n\tconst onClickExt = ({id}) => {\n\n\t\t// CLone the activeExtra State\n\t\tconst clone = Object.create(extraActive)\n\n\t\t// check if the clicked extra is already active then disable it and return \n\t\tif(clone[id]) {\n\t\t\tsetExtraActive(p => ({\n\t\t\t\t...p,\n\t\t\t\t[id]: false\n\t\t\t}))\n\t\t\treturn\n\t\t}\n\t\t\n\t\t// Get All Ids from state in an Array\n\t\tconst ids = Object.keys(clone);\n\n\t\t// create an object that will be passed as in state \n\t\t// which we will use to disable the rest state (false)\n\t\t// this will ensure at one time only one is active\n\t\tconst fakeState = {}\n\n\t\t// assign each state false\n\t\tids.forEach((id) => {fakeState[id] = false })\n\n\t\t// setActive only the one that gets clicked \n\t\tsetExtraActive(p => ({\n\t\t\t...ids,\n\t\t\t[id]: true\n\t\t}))\n\t}\n\n\tconst onDelete = ({id}) => {\n\t\tdispatch(deleteSingleExtraData(id))\n\t}\n\n\tconst save = () => {\n\t\tdispatch(addExtrasData(ext));\n\t\tcloseDrawer(anchor, false);\n\t}\n\n\tconst onAdd = () => {\n\t\tdispatch(addSampleExtraData({\n\t\t\tid: uuidv4(),\n\t\t\ttitle: 'Sample Title',\n\t\t\ttype: 'COMMA',\n\t\t\titems: ['Sample Item 1', 'Sample Item 2'],\n\t\t}))\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t<div className='flex items-center justify-start flex-wrap lg:flex-nowrap'>\n\t\t<div className='w-full md:w-auto mb-4 md:mb-0'>\n\t\t<Button\n\t\t\tclassName='lg:px-4 lg:py-2 mr-4'\n\t\t\tonClick={() => closeDrawer(anchor, false)}\n\t\t\tcolor='default'\n\t\t\tvariant='text'\n\t\t\t>\n\t\t\t{' '}\n\t\t\t<ArrowBackIcon /><p className='ml-2 capitalize'>Back</p>\n\t\t</Button>\n\t\t</div>\n\t\t<Button\n\t\t\tclassName='lg:px-4 lg:py-2 mr-4'\n\t\t\tonClick={onAdd}\n\t\t\tcolor='primary'\n\t\t\tvariant='outlined'\n\t\t\t>\n\t\t\t<AddIcon /><p className='ml-2 capitalize'>Add Extra</p>\n\t\t</Button>\n\t\t<Button\n\t\t\tclassName='lg:px-4 lg:py-2'\n\t\t\tonClick={save}\n\t\t\tcolor='primary'\n\t\t\tvariant='contained'\n\t\t\t>\n\t\t\t<SaveIcon /><p className='ml-2 capitalize'>Save Order</p>\n\t\t</Button>\n\t\t</div>\n\t\t<DragDropContext onDragEnd={onDragEnd}>\n\t\t\t<Droppable droppableId={'extras'}>\n\t\t\t\t{(provided,snapshot) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={getListStyle(snapshot.isDraggingOver)}\n\t\t\t\t\t\tclassName='pb-10 pt-8 rounded'\n\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tif(snapshot.isDraggingOver) {\n\t\t\t\t\t\t\t\tdisableActiveExt()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ext.map((e, index) => (\n\t\t\t\t\t\t\t<Draggable\n\t\t\t\t\t\t\t\tkey={e.id}\n\t\t\t\t\t\t\t\tdraggableId={e.id}\n\t\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{(provided,snapshot) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => onClickExt({id: e.id})}\n\t\t\t\t\t\t\t\t\t\t\tclassName='p-6 text-white text-lg bg-primary rounded'\n\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.dragHandleProps}\n\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{...getItemStyle(\n\t\t\t\t\t\t\t\t\t\t\t\tsnapshot.isDragging,\n\t\t\t\t\t\t\t\t\t\t\t\tprovided.draggableProps.style,\n\t\t\t\t\t\t\t\t\t\t\t  ),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ExtrasCard\n\t\t\t\t\t\t\t\t\t\t{...e}\n\t\t\t\t\t\t\t\t\t\tonDelete={onDelete}\n\t\t\t\t\t\t\t\t\t\topenEditExtForm={toggleExtDrawerStates(e.id, true)}\n\t\t\t\t\t\t\t\t\t\textraActive={extraActive} \n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</Droppable>\n\t\t</DragDropContext>\n\t\n\t{ext.map((ext) => (\n\t\t<div key={ext.id}>\n\t\t<Drawer\n\t\tanchor={'left'}\n\t\topen={extDrawerStates[ext.id]}\n\t\tonClose={toggleExtDrawerStates(ext.id, false)}\n\t\t>\n\t\t<div\n\t\t\tclassName={clsx(classes.list)}\n\t\t\trole='presentation'\n\t\t>\n\t\t\t<div className='pt-10 pl-10 pr-10'>\n\t\t\t\t<div className='flex align-center'>\n\t\t\t\t<Button\n\t\t\t\t\tclassName='px-4 py-2'\n\t\t\t\t\tonClick={toggleExtDrawerStates(ext.id, false)}\n\t\t\t\t\tcolor='default'\n\t\t\t\t\tvariant='outlined'\n\t\t\t\t>\n\t\t\t\t\t<ArrowBackIcon /><p className='ml-2 capitalize'>Back</p>\n\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<EditSingleExtra\n\t\t\t\tanchor={anchor}\n\t\t\t\textra={ext}\n\t\t\t\tsetEdit={setEdit}\n\t\t\t\tcloseDrawer={toggleExtDrawerStates(ext.id, false)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{/*<Divider />*/}\n\t\t</div>\n\t\t</Drawer>\n\t\t</div>\n\t))}\n\t</Fragment>\n\t\t);\n};\n\nexport default ReorderExtras;\n\n\n"]},"metadata":{},"sourceType":"module"}