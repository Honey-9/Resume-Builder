{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/honey/Documents/Resume builder/components/drag&drop/ReorderExtras.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Button from '@material-ui/core/Button';\nimport { v4 as uuidv4 } from 'uuid';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { Fragment } from 'react';\nimport AddIcon from '@material-ui/icons/Add';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { addExtrasData, addSampleExtraData, deleteSingleExtraData } from '../../redux/actions/resumeActions';\nimport { Drawer, makeStyles, useMediaQuery } from '@material-ui/core';\nimport clsx from 'clsx';\nimport ExtrasCard from '../cards/ExtrasCard';\nimport EditSingleExtra from '../forms/EditSingleExtra';\n\nconst ReorderExtras = ({\n  closeDrawer,\n  anchor\n}) => {\n  // media Query\n  const matches = useMediaQuery('(min-width:1024px)');\n  const dispatch = useDispatch(); // Fetch Global State \n\n  const extras = useSelector(state => state.resume.data.extras); // Local Extras State for drag and drop\n\n  const {\n    0: ext,\n    1: setExt\n  } = useState(extras);\n  const extrasStates = {};\n  ext.forEach(ext => extrasStates[ext.id] = false); // \n\n  const {\n    0: extraActive,\n    1: setExtraActive\n  } = useState(_objectSpread({}, extrasStates)); // This to keep track of localState if one of the extras have been updated to update state in useEffect\n\n  const {\n    0: edit,\n    1: setEdit\n  } = useState(false);\n  const extDrawerStatesObj = {};\n  ext.map(ext => extDrawerStatesObj[ext.id] = false);\n  useEffect(() => {\n    if (!(extras.length === ext.length)) {\n      setExt(extras);\n    }\n\n    if (edit) {\n      setExt(extras);\n      setEdit(false);\n    }\n  }, [extras, ext, edit]);\n  const useStyles = makeStyles({\n    list: {\n      width: matches ? '50vw' : '100vw',\n      // width: '50vw',\n      minHeight: matches ? '0' : '100vh'\n    },\n    fullList: {\n      width: 'auto'\n    }\n  });\n  const classes = useStyles(); // Nested Drawer States\n\n  const [extDrawerStates, setExtDrawerStates] = React.useState(_objectSpread({}, extDrawerStatesObj));\n\n  const toggleExtDrawerStates = (id, open) => event => {\n    setExtDrawerStates(_objectSpread(_objectSpread({}, extDrawerStates), {}, {\n      [id]: open\n    }));\n  };\n\n  const onDragEnd = result => {\n    if (!result.destination) return;\n    const items = Array.from(ext);\n    const [reorderItem] = items.splice(result.source.index, 1);\n    items.splice(result.destination.index, 0, reorderItem);\n    setExt(items);\n  };\n\n  const grid = 10;\n\n  const getItemStyle = (isDragging, draggableStyle) => _objectSpread({\n    // some basic styles to make the items look a bit nicer\n    userSelect: 'none',\n    padding: grid * 2,\n    margin: `0 0 ${grid}px 0`,\n    transition: 'height 0.2s',\n    overflow: 'hidden',\n    // change background colour if dragging\n    background: isDragging ? '#1abc9c95' : '#1abc9c'\n  }, draggableStyle);\n\n  const getListStyle = isDraggingOver => ({// background: isDraggingOver ? '#ffffff' : '#16a085',\t\t\n  });\n\n  const disableActiveExt = () => {\n    const clone = Object.create(extraActive);\n    const ids = Object.keys(clone); // create an object that will be passed as in state \n    // which we will use to disable the rest state (false)\n    // this will ensure at one time only one is active\n\n    const fakeState = {}; // assign each state false\n\n    ids.forEach(id => {\n      fakeState[id] = false;\n    }); // setActive only the one that gets clicked \n\n    setExtraActive(fakeState);\n  };\n\n  const onClickExt = ({\n    id\n  }) => {\n    // CLone the activeExtra State\n    const clone = Object.create(extraActive); // check if the clicked extra is already active then disable it and return \n\n    if (clone[id]) {\n      setExtraActive(p => _objectSpread(_objectSpread({}, p), {}, {\n        [id]: false\n      }));\n      return;\n    } // Get All Ids from state in an Array\n\n\n    const ids = Object.keys(clone); // create an object that will be passed as in state \n    // which we will use to disable the rest state (false)\n    // this will ensure at one time only one is active\n\n    const fakeState = {}; // assign each state false\n\n    ids.forEach(id => {\n      fakeState[id] = false;\n    }); // setActive only the one that gets clicked \n\n    setExtraActive(p => _objectSpread(_objectSpread({}, ids), {}, {\n      [id]: true\n    }));\n  };\n\n  const onDelete = ({\n    id\n  }) => {\n    dispatch(deleteSingleExtraData(id));\n  };\n\n  const save = () => {\n    dispatch(addExtrasData(ext));\n    closeDrawer(anchor, false);\n  };\n\n  const onAdd = () => {\n    dispatch(addSampleExtraData({\n      id: uuidv4(),\n      title: 'Sample Title',\n      type: 'COMMA',\n      items: ['Sample Item 1', 'Sample Item 2']\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-start flex-wrap lg:flex-nowrap\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full md:w-auto mb-4 md:mb-0\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          className: \"lg:px-4 lg:py-2 mr-4\",\n          onClick: () => closeDrawer(anchor, false),\n          color: \"default\",\n          variant: \"text\",\n          children: [' ', /*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 4\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"ml-2 capitalize\",\n            children: \"Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 3\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"lg:px-4 lg:py-2 mr-4\",\n        onClick: onAdd,\n        color: \"primary\",\n        variant: \"outlined\",\n        children: [/*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ml-2 capitalize\",\n          children: \"Add Extra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"lg:px-4 lg:py-2\",\n        onClick: save,\n        color: \"primary\",\n        variant: \"contained\",\n        children: [/*#__PURE__*/_jsxDEV(SaveIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ml-2 capitalize\",\n          children: \"Save Order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragEnd: onDragEnd,\n      children: /*#__PURE__*/_jsxDEV(Droppable, {\n        droppableId: 'extras',\n        children: (provided, snapshot) => /*#__PURE__*/_jsxDEV(\"div\", _objectSpread(_objectSpread({\n          style: getListStyle(snapshot.isDraggingOver),\n          className: \"pb-10 pt-8 rounded\"\n        }, provided.droppableProps), {}, {\n          ref: provided.innerRef,\n          onClick: () => {\n            if (snapshot.isDraggingOver) {\n              disableActiveExt();\n            }\n          },\n          children: [ext.map((e, index) => /*#__PURE__*/_jsxDEV(Draggable, {\n            draggableId: e.id,\n            index: index,\n            children: (provided, snapshot) => /*#__PURE__*/_jsxDEV(\"div\", _objectSpread(_objectSpread(_objectSpread({\n              onClick: () => onClickExt({\n                id: e.id\n              }),\n              className: \"p-6 text-white text-lg bg-primary rounded\"\n            }, provided.draggableProps), provided.dragHandleProps), {}, {\n              ref: provided.innerRef,\n              style: _objectSpread({}, getItemStyle(snapshot.isDragging, provided.draggableProps.style)),\n              children: /*#__PURE__*/_jsxDEV(ExtrasCard, _objectSpread(_objectSpread({}, e), {}, {\n                onDelete: onDelete,\n                openEditExtForm: toggleExtDrawerStates(e.id, true),\n                extraActive: extraActive\n              }), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 11\n              }, this)\n            }), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 11\n            }, this)\n          }, e.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 8\n          }, this)), provided.placeholder]\n        }), void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 4\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 3\n    }, this), ext.map(ext => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Drawer, {\n        anchor: 'left',\n        open: extDrawerStates[ext.id],\n        onClose: toggleExtDrawerStates(ext.id, false),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: clsx(classes.list),\n          role: \"presentation\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pt-10 pl-10 pr-10\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex align-center\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                className: \"px-4 py-2\",\n                onClick: toggleExtDrawerStates(ext.id, false),\n                color: \"default\",\n                variant: \"outlined\",\n                children: [/*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 6\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"ml-2 capitalize\",\n                  children: \"Back\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 5\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(EditSingleExtra, {\n              anchor: anchor,\n              extra: ext,\n              setEdit: setEdit,\n              closeDrawer: toggleExtDrawerStates(ext.id, false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 5\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 4\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 3\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 3\n      }, this)\n    }, ext.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 3\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 3\n  }, this);\n};\n\nexport default ReorderExtras;","map":{"version":3,"sources":["/home/honey/Documents/Resume builder/components/drag&drop/ReorderExtras.js"],"names":["React","useState","useEffect","useRef","DragDropContext","Droppable","Draggable","useDispatch","useSelector","Button","v4","uuidv4","ArrowBackIcon","Fragment","AddIcon","SaveIcon","addExtrasData","addSampleExtraData","deleteSingleExtraData","Drawer","makeStyles","useMediaQuery","clsx","ExtrasCard","EditSingleExtra","ReorderExtras","closeDrawer","anchor","matches","dispatch","extras","state","resume","data","ext","setExt","extrasStates","forEach","id","extraActive","setExtraActive","edit","setEdit","extDrawerStatesObj","map","length","useStyles","list","width","minHeight","fullList","classes","extDrawerStates","setExtDrawerStates","toggleExtDrawerStates","open","event","onDragEnd","result","destination","items","Array","from","reorderItem","splice","source","index","grid","getItemStyle","isDragging","draggableStyle","userSelect","padding","margin","transition","overflow","background","getListStyle","isDraggingOver","disableActiveExt","clone","Object","create","ids","keys","fakeState","onClickExt","p","onDelete","save","onAdd","title","type","provided","snapshot","droppableProps","innerRef","e","draggableProps","dragHandleProps","style","placeholder"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Button from '@material-ui/core/Button';\nimport { v4 as uuidv4 } from 'uuid';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { Fragment } from 'react';\nimport AddIcon from '@material-ui/icons/Add';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { addExtrasData, addSampleExtraData, deleteSingleExtraData } from '../../redux/actions/resumeActions';\nimport { Drawer, makeStyles, useMediaQuery } from '@material-ui/core';\nimport clsx from 'clsx';\nimport ExtrasCard from '../cards/ExtrasCard';\nimport EditSingleExtra from '../forms/EditSingleExtra';\n\nconst ReorderExtras = ({closeDrawer, anchor}) => {\n\t// media Query\n\tconst matches = useMediaQuery('(min-width:1024px)');\n\tconst dispatch = useDispatch();\n\n\t// Fetch Global State \n\tconst extras = useSelector((state) => state.resume.data.extras)\n\n\t// Local Extras State for drag and drop\n\tconst [ext, setExt] = useState(extras);\n\tconst extrasStates = {};\n\text.forEach((ext) => (extrasStates[ext.id] = false));\n\t// \n\tconst [extraActive, setExtraActive] = useState({...extrasStates});\n\n\t// This to keep track of localState if one of the extras have been updated to update state in useEffect\n\tconst [edit, setEdit] = useState(false)\n\n\tconst extDrawerStatesObj = {};\n\text.map((ext) => (extDrawerStatesObj[ext.id] = false));\n\n\tuseEffect(() => {\n\t\tif(!(extras.length === ext.length)){\n\t\t\tsetExt(extras)\n\t\t}\n\t\tif(edit) {\n\t\t\tsetExt(extras)\n\t\t\tsetEdit(false)\n\t\t}\n\t},[extras, ext, edit])\n\n\tconst useStyles = makeStyles({\n\t\tlist: {\n\t\t\twidth: matches ? '50vw' : '100vw',\n\t\t\t// width: '50vw',\n\t\t\tminHeight: matches ? '0' : '100vh',\n\t\t},\n\t\tfullList: {\n\t\t\twidth: 'auto',\n\t\t},\n\t});\n\tconst classes = useStyles();\n\n\t// Nested Drawer States\n\tconst [extDrawerStates, setExtDrawerStates] = React.useState({ ...extDrawerStatesObj });\n\tconst toggleExtDrawerStates = (id, open) => (event) => {\n\t\tsetExtDrawerStates({ ...extDrawerStates, [id]: open });\n\t};\n\tconst onDragEnd = (result) => {\n\t\tif (!result.destination) return;\n\t\tconst items = Array.from(ext);\n\t\tconst [reorderItem] = items.splice(result.source.index, 1);\n\t\titems.splice(result.destination.index, 0, reorderItem);\n\t\tsetExt(items);\n\t};\n\n\tconst grid = 10;\n\tconst getItemStyle = (isDragging, draggableStyle) =>  ({\n\t\t\t// some basic styles to make the items look a bit nicer\n\t\t\tuserSelect: 'none',\n\t\t\tpadding: grid * 2,\n\t\t\tmargin: `0 0 ${grid}px 0`,\n\t\t\ttransition: 'height 0.2s',\n\t\t\toverflow: 'hidden',\n\t\n\t\t\t// change background colour if dragging\n\t\t\tbackground: isDragging ? '#1abc9c95' : '#1abc9c',\n\t\t\t\n\t\t\t// styles we need to apply on draggables\n\t\t\t...draggableStyle,\n\t\t});\n\n\tconst getListStyle = (isDraggingOver) => ({\n\t\t// background: isDraggingOver ? '#ffffff' : '#16a085',\t\t\n\t});\n\n\tconst disableActiveExt = () => {\n\t\tconst clone = Object.create(extraActive)\n\n\t\tconst ids = Object.keys(clone);\n\n\t\t// create an object that will be passed as in state \n\t\t// which we will use to disable the rest state (false)\n\t\t// this will ensure at one time only one is active\n\t\tconst fakeState = {}\n\n\t\t// assign each state false\n\t\tids.forEach((id) => {fakeState[id] = false })\n\n\t\t// setActive only the one that gets clicked \n\t\tsetExtraActive(fakeState)\t\n\t}\n\n\n\tconst onClickExt = ({id}) => {\n\n\t\t// CLone the activeExtra State\n\t\tconst clone = Object.create(extraActive)\n\n\t\t// check if the clicked extra is already active then disable it and return \n\t\tif(clone[id]) {\n\t\t\tsetExtraActive(p => ({\n\t\t\t\t...p,\n\t\t\t\t[id]: false\n\t\t\t}))\n\t\t\treturn\n\t\t}\n\t\t\n\t\t// Get All Ids from state in an Array\n\t\tconst ids = Object.keys(clone);\n\n\t\t// create an object that will be passed as in state \n\t\t// which we will use to disable the rest state (false)\n\t\t// this will ensure at one time only one is active\n\t\tconst fakeState = {}\n\n\t\t// assign each state false\n\t\tids.forEach((id) => {fakeState[id] = false })\n\n\t\t// setActive only the one that gets clicked \n\t\tsetExtraActive(p => ({\n\t\t\t...ids,\n\t\t\t[id]: true\n\t\t}))\n\t}\n\n\tconst onDelete = ({id}) => {\n\t\tdispatch(deleteSingleExtraData(id))\n\t}\n\n\tconst save = () => {\n\t\tdispatch(addExtrasData(ext));\n\t\tcloseDrawer(anchor, false);\n\t}\n\n\tconst onAdd = () => {\n\t\tdispatch(addSampleExtraData({\n\t\t\tid: uuidv4(),\n\t\t\ttitle: 'Sample Title',\n\t\t\ttype: 'COMMA',\n\t\t\titems: ['Sample Item 1', 'Sample Item 2'],\n\t\t}))\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t<div className='flex items-center justify-start flex-wrap lg:flex-nowrap'>\n\t\t<div className='w-full md:w-auto mb-4 md:mb-0'>\n\t\t<Button\n\t\t\tclassName='lg:px-4 lg:py-2 mr-4'\n\t\t\tonClick={() => closeDrawer(anchor, false)}\n\t\t\tcolor='default'\n\t\t\tvariant='text'\n\t\t\t>\n\t\t\t{' '}\n\t\t\t<ArrowBackIcon /><p className='ml-2 capitalize'>Back</p>\n\t\t</Button>\n\t\t</div>\n\t\t<Button\n\t\t\tclassName='lg:px-4 lg:py-2 mr-4'\n\t\t\tonClick={onAdd}\n\t\t\tcolor='primary'\n\t\t\tvariant='outlined'\n\t\t\t>\n\t\t\t<AddIcon /><p className='ml-2 capitalize'>Add Extra</p>\n\t\t</Button>\n\t\t<Button\n\t\t\tclassName='lg:px-4 lg:py-2'\n\t\t\tonClick={save}\n\t\t\tcolor='primary'\n\t\t\tvariant='contained'\n\t\t\t>\n\t\t\t<SaveIcon /><p className='ml-2 capitalize'>Save Order</p>\n\t\t</Button>\n\t\t</div>\n\t\t<DragDropContext onDragEnd={onDragEnd}>\n\t\t\t<Droppable droppableId={'extras'}>\n\t\t\t\t{(provided,snapshot) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={getListStyle(snapshot.isDraggingOver)}\n\t\t\t\t\t\tclassName='pb-10 pt-8 rounded'\n\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tif(snapshot.isDraggingOver) {\n\t\t\t\t\t\t\t\tdisableActiveExt()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ext.map((e, index) => (\n\t\t\t\t\t\t\t<Draggable\n\t\t\t\t\t\t\t\tkey={e.id}\n\t\t\t\t\t\t\t\tdraggableId={e.id}\n\t\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{(provided,snapshot) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => onClickExt({id: e.id})}\n\t\t\t\t\t\t\t\t\t\t\tclassName='p-6 text-white text-lg bg-primary rounded'\n\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.dragHandleProps}\n\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{...getItemStyle(\n\t\t\t\t\t\t\t\t\t\t\t\tsnapshot.isDragging,\n\t\t\t\t\t\t\t\t\t\t\t\tprovided.draggableProps.style,\n\t\t\t\t\t\t\t\t\t\t\t  ),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ExtrasCard\n\t\t\t\t\t\t\t\t\t\t{...e}\n\t\t\t\t\t\t\t\t\t\tonDelete={onDelete}\n\t\t\t\t\t\t\t\t\t\topenEditExtForm={toggleExtDrawerStates(e.id, true)}\n\t\t\t\t\t\t\t\t\t\textraActive={extraActive} \n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</Droppable>\n\t\t</DragDropContext>\n\t\n\t{ext.map((ext) => (\n\t\t<div key={ext.id}>\n\t\t<Drawer\n\t\tanchor={'left'}\n\t\topen={extDrawerStates[ext.id]}\n\t\tonClose={toggleExtDrawerStates(ext.id, false)}\n\t\t>\n\t\t<div\n\t\t\tclassName={clsx(classes.list)}\n\t\t\trole='presentation'\n\t\t>\n\t\t\t<div className='pt-10 pl-10 pr-10'>\n\t\t\t\t<div className='flex align-center'>\n\t\t\t\t<Button\n\t\t\t\t\tclassName='px-4 py-2'\n\t\t\t\t\tonClick={toggleExtDrawerStates(ext.id, false)}\n\t\t\t\t\tcolor='default'\n\t\t\t\t\tvariant='outlined'\n\t\t\t\t>\n\t\t\t\t\t<ArrowBackIcon /><p className='ml-2 capitalize'>Back</p>\n\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<EditSingleExtra\n\t\t\t\tanchor={anchor}\n\t\t\t\textra={ext}\n\t\t\t\tsetEdit={setEdit}\n\t\t\t\tcloseDrawer={toggleExtDrawerStates(ext.id, false)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{/*<Divider />*/}\n\t\t</div>\n\t\t</Drawer>\n\t\t</div>\n\t))}\n\t</Fragment>\n\t\t);\n};\n\nexport default ReorderExtras;\n\n\n"]},"metadata":{},"sourceType":"module"}